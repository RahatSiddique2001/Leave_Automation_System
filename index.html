<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Leave Automation - Home</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <nav class="navbar navbar-expand bg-light">
    <div class="container">
      <a class="navbar-brand" href="#">Leave System</a>
      <div>
        <button class="btn btn-outline-primary" id="open-auth">Login / Signup</button>
        <a href="apply.html" class="btn btn-primary ms-2">Apply for Leave</a>
        <a href="list.html" class="btn btn-secondary ms-2">My Requests</a>
      </div>
    </div>
  </nav>

  <div class="container py-5">
    <h1>Welcome</h1>
    <p>Simple Leave Automation MVP. Please log in to apply and view requests.</p>
    <div id="user-area"></div>
  </div>

  <!-- Auth Modal -->
  <div class="modal fade" id="authModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Login / Signup</h5><button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="auth-msg"></div>
          <input class="form-control mb-2" id="fullName" placeholder="Full name (for signup)" />
          <input class="form-control mb-2" id="teacherId" placeholder="Teacher ID (optional)" />
          <select id="role" class="form-control mb-2">
            <option value="teacher">Teacher</option>
            <option value="hod">Head of Dept</option>
            <option value="registrar">Registrar</option>
          </select>
          <input class="form-control mb-2" id="email" placeholder="Email" />
          <input class="form-control mb-2" id="password" type="password" placeholder="Password" />
          <div class="d-flex justify-content-between">
            <button class="btn btn-primary" id="btn-signup">Sign up</button>
            <button class="btn btn-success" id="btn-login">Log in</button>
            <button class="btn btn-outline-danger" id="btn-logout" style="display:none">Log out</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { initAuthHandlers } from './js/auth.js';
    document.getElementById('open-auth').addEventListener('click', () => {
      const modalEl = document.getElementById('authModal');
      const modal = new bootstrap.Modal(modalEl);
      modal.show();
    });

    // initialize auth UI handlers
    initAuthHandlers();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>